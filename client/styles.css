/* ============================================
   HALLOWEEN BATTLE: PUMPKINS VS BATS
   High Contrast Dark Theme
   ============================================ */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Courier New', monospace;
    background: linear-gradient(180deg, #050008 0%, #2a004b 60%, #1a0b00 100%);
    color: #fff;
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding: 20px;
}

/* Setup Screen */
.setup-screen {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    width: 100%;
}

.setup-container {
    background: rgba(0, 0, 0, 0.8);
    border: 3px solid #9b4dff;
    border-radius: 20px;
    padding: 40px 60px;
    max-width: 600px;
    text-align: center;
    box-shadow: 0 0 40px rgba(155, 77, 255, 0.6);
}

.setup-container h1 {
    font-size: 2.5rem;
    margin-bottom: 20px;
    text-shadow: 0 0 20px #ff7b00;
}

.setup-container p {
    font-size: 1.2rem;
    margin-bottom: 25px;
    color: #ddd;
}

.input-group {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 20px;
}

#tiktok-username-input {
    font-family: 'Courier New', monospace;
    font-size: 1.3rem;
    padding: 15px 20px;
    background: rgba(0, 0, 0, 0.6);
    border: 2px solid #9b4dff;
    border-radius: 10px;
    color: #fff;
    text-align: center;
    outline: none;
    transition: all 0.3s ease;
}

#tiktok-username-input:focus {
    border-color: #ff7b00;
    box-shadow: 0 0 20px rgba(255, 123, 0, 0.5);
}

#connect-button {
    font-family: 'Courier New', monospace;
    font-size: 1.2rem;
    padding: 15px 30px;
    background: linear-gradient(135deg, #ff7b00, #9b4dff);
    border: none;
    border-radius: 10px;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(155, 77, 255, 0.4);
}

#connect-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 123, 0, 0.6);
}

#connect-button:active {
    transform: translateY(0);
}

.setup-note {
    font-size: 0.9rem;
    color: #999;
    font-style: italic;
}

.connection-message {
    margin-top: 20px;
    padding: 15px;
    border-radius: 10px;
    font-size: 1.1rem;
}

.connection-message.success {
    background: rgba(0, 255, 0, 0.2);
    border: 2px solid #00ff00;
    color: #00ff00;
}

.connection-message.error {
    background: rgba(255, 0, 0, 0.2);
    border: 2px solid #ff0000;
    color: #ff0000;
}

.connection-message.info {
    background: rgba(255, 255, 0, 0.2);
    border: 2px solid #ffff00;
    color: #ffff00;
}

.game-container {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: 20px;
    max-width: 1800px;
    width: 100%;
    padding: 20px;
}

/* Side Panel - Enhanced for Livestream Visibility */
.side-panel {
    width: clamp(260px, 20vw, 340px);
    background: rgba(0, 0, 0, 0.85);
    border: 3px solid #9b4dff;
    border-radius: 15px;
    padding: clamp(15px, 2vw, 25px);
    box-shadow: 0 0 40px rgba(155, 77, 255, 0.6);
    flex-shrink: 0;
    max-height: calc(100vh - 40px);
    overflow-y: auto;
    overflow-x: hidden;
}

/* Custom scrollbar for sidebar */
.side-panel::-webkit-scrollbar {
    width: 8px;
}

.side-panel::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
}

.side-panel::-webkit-scrollbar-thumb {
    background: rgba(155, 77, 255, 0.6);
    border-radius: 10px;
}

.side-panel::-webkit-scrollbar-thumb:hover {
    background: rgba(155, 77, 255, 0.9);
}

.emojis-header {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: clamp(10px, 1.5vw, 15px);
    margin-bottom: clamp(12px, 2vw, 18px);
    font-size: clamp(2rem, 3.5vw, 3.2rem);
    opacity: 1;
}

.vs-text {
    font-size: clamp(1.1rem, 1.6vw, 1.5rem);
    font-weight: 800;
    color: #9b4dff;
    text-shadow: 0 0 15px #9b4dff, 0 0 6px rgba(155, 77, 255, 0.9);
}

.like-progress {
    background: rgba(255, 123, 0, 0.3);
    border: 3px solid #ff7b00;
    border-radius: 10px;
    padding: clamp(8px, 1.2vw, 12px);
    margin-bottom: clamp(12px, 1.5vw, 18px);
    text-align: center;
    font-size: clamp(0.85rem, 1.1vw, 1.1rem);
    font-weight: 700;
    color: #ff7b00;
    text-shadow: 0 0 8px #ff7b00, 0 0 6px rgba(255, 140, 0, 0.9);
}

.gift-chart {
    margin-bottom: clamp(12px, 2vw, 18px);
}

.gift-chart h3 {
    font-size: clamp(1rem, 1.4vw, 1.6rem);
    margin-bottom: clamp(10px, 1.5vw, 15px);
    color: #ff7b00;
    text-align: center;
    text-shadow: 0 0 12px #ff7b00, 0 0 6px rgba(255, 140, 0, 0.9);
    font-weight: 700;
    animation: titlePulse 3s ease-in-out infinite;
}

@keyframes titlePulse {
    0%, 100% { 
        text-shadow: 0 0 12px #ff7b00, 0 0 6px rgba(255, 140, 0, 0.9);
        transform: scale(1);
    }
    50% { 
        text-shadow: 0 0 20px #ff7b00, 0 0 10px rgba(255, 140, 0, 1);
        transform: scale(1.03);
    }
}

.gift-chart table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 4px;
}

.gift-chart td {
    padding: clamp(5px, 0.8vw, 8px) clamp(4px, 0.6vw, 6px);
    font-size: clamp(0.8rem, 1.1vw, 1.2rem);
    line-height: 1.4;
    font-weight: 700;
    background: rgba(0, 0, 0, 0.35);
    border-radius: 8px;
    transition: transform 0.15s ease, background 0.15s ease;
}

@media (hover: hover) {
    .gift-chart tr:hover td {
        transform: translateX(3px);
        background: rgba(0, 0, 0, 0.5);
    }
}

.gift-chart td:first-child {
    color: #9b4dff;
    font-weight: 700;
    text-shadow: 0 0 6px rgba(155, 77, 255, 0.9);
    font-size: 1.3em;
    line-height: 1.2em;
    opacity: 1;
}

.gift-chart td:last-child {
    text-align: right;
    font-weight: 700;
    color: #ff7b00;
    text-shadow: 0 0 6px rgba(255, 140, 0, 0.9);
}

/* Featured gift rows */
.gift-chart tr.featured {
    background: transparent;
    border-left: none;
}

.gift-chart tr.featured td {
    color: #ffd700;
    text-shadow: 0 0 8px #ffd700, 0 0 6px rgba(255, 215, 0, 0.9);
    background: rgba(255, 215, 0, 0.15);
    font-weight: 700;
    transition: transform 0.2s ease, background 0.2s ease;
}

.gift-chart tr.featured:hover td {
    transform: scale(1.05);
    background: rgba(255, 215, 0, 0.25);
}

.gift-chart tr.featured-wild {
    background: transparent;
    border-left: none;
}

.gift-chart tr.featured-wild td {
    color: #ff00ff;
    text-shadow: 0 0 12px #ff00ff, 0 0 6px rgba(255, 0, 255, 0.9);
    font-weight: 800;
    background: rgba(255, 0, 255, 0.2);
    transition: transform 0.2s ease, background 0.2s ease;
}

.gift-chart tr.featured-wild:hover td {
    transform: scale(1.08);
    background: rgba(255, 0, 255, 0.3);
}

.gift-chart .tag {
    display: inline-block;
    font-size: clamp(0.6rem, 0.9vw, 0.9rem);
    padding: clamp(2px, 0.3vw, 4px) clamp(4px, 0.6vw, 8px);
    margin-left: clamp(4px, 0.6vw, 8px);
    border-radius: 6px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.8px;
}

.gift-chart .featured .tag {
    background: rgba(255, 215, 0, 0.4);
    color: #ffd700;
    border: 2px solid #ffd700;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
}

.gift-chart .featured-wild .tag {
    background: rgba(255, 0, 255, 0.4);
    color: #ff00ff;
    border: 2px solid #ff00ff;
    box-shadow: 0 0 15px rgba(255, 0, 255, 0.8);
    animation: wildPulse 2s ease-in-out infinite;
}

@keyframes wildPulse {
    0%, 100% { box-shadow: 0 0 15px rgba(255, 0, 255, 0.8); }
    50% { box-shadow: 0 0 25px rgba(255, 0, 255, 1); }
}

.instructions {
    background: rgba(155, 77, 255, 0.15);
    border-radius: 10px;
    padding: clamp(12px, 1.5vw, 18px);
}

.instructions p {
    font-size: clamp(0.75rem, 1vw, 1rem);
    line-height: 1.5;
    margin-bottom: clamp(3px, 0.5vw, 6px);
    font-weight: 600;
    text-shadow: 0 0 4px rgba(255, 255, 255, 0.3);
}

.instructions strong {
    color: #ff7b00;
    display: block;
    margin-bottom: clamp(6px, 0.8vw, 10px);
    font-weight: 700;
    text-shadow: 0 0 6px rgba(255, 140, 0, 0.9);
}

/* Main Game Area */
.game-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    position: relative; /* Make this the positioning parent for overlays */
}

.header {
    text-align: center;
    width: 100%;
}

h1 {
    font-size: clamp(2rem, 4vw, 3.5rem);
    text-shadow: 
        0 0 10px #9b4dff,
        0 0 20px #9b4dff,
        0 0 30px #ff7b00,
        2px 2px 5px rgba(0,0,0,0.8);
    letter-spacing: clamp(2px, 0.5vw, 4px);
    margin-bottom: clamp(12px, 2vw, 20px);
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { text-shadow: 0 0 10px #9b4dff, 0 0 20px #9b4dff, 0 0 30px #ff7b00; }
    50% { text-shadow: 0 0 20px #9b4dff, 0 0 40px #9b4dff, 0 0 60px #ff7b00; }
}

.scoreboard {
    font-size: clamp(1.8rem, 3.5vw, 2.8rem);
    font-weight: 800;
    background: rgba(0, 0, 0, 0.85);
    padding: clamp(15px, 2.5vw, 25px) clamp(30px, 5vw, 60px);
    border-radius: 15px;
    border: 4px solid #9b4dff;
    box-shadow: 
        0 0 30px rgba(155, 77, 255, 0.7),
        inset 0 0 20px rgba(155, 77, 255, 0.3);
    text-shadow: 
        0 0 15px currentColor,
        2px 2px 6px rgba(0,0,0,0.9);
    display: flex;
    gap: clamp(30px, 5vw, 60px);
    align-items: center;
    justify-content: center;
}

.team-score.orange {
    color: #ff7b00;
    text-shadow: 
        0 0 15px #ff7b00,
        0 0 25px #ff7b00;
}

.team-score.purple {
    color: #9b4dff;
    text-shadow: 
        0 0 15px #9b4dff,
        0 0 25px #9b4dff;
}

.timer {
    font-size: clamp(1.5rem, 3vw, 2.5rem);
    font-weight: 800;
    color: #fff;
    text-shadow: 
        0 0 15px #9b4dff,
        0 0 25px rgba(155, 77, 255, 0.8);
    min-width: clamp(80px, 15vw, 150px);
}

.timer.overtime {
    color: #ff0000;
    animation: blink 1s infinite;
}

.timer.mega-event {
    color: #ffff00;
    animation: rainbow 2s linear infinite;
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0.3; }
}

@keyframes rainbow {
    0% { color: #ff0000; }
    16% { color: #ff7b00; }
    33% { color: #ffff00; }
    50% { color: #00ff00; }
    66% { color: #00ffff; }
    83% { color: #9b4dff; }
    100% { color: #ff0000; }
}

.round-status {
    margin-top: 10px;
    font-size: clamp(1.5rem, 2.5vw, 2rem);
    font-weight: 800;
    color: #00ff88;
    text-shadow: 
        0 0 15px #00ff88,
        0 0 25px rgba(0, 255, 136, 0.8),
        2px 2px 4px rgba(0, 0, 0, 0.9);
    background: rgba(0, 255, 136, 0.1);
    padding: 8px 20px;
    border-radius: 10px;
    border: 2px solid #00ff88;
    display: inline-block;
}

.connection-status {
    margin-top: 8px;
    font-size: 0.9rem;
    padding: 5px 15px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.5);
    display: inline-block;
}

.connection-status.connected {
    color: #00ff00;
}

.connection-status.disconnected {
    color: #ff0000;
}

/* Total Wins Scoreboard */
.total-wins {
    display: flex;
    gap: clamp(15px, 3vw, 30px);
    align-items: center;
    background: rgba(0, 0, 0, 0.9);
    padding: clamp(12px, 2vw, 20px) clamp(25px, 4vw, 50px);
    border-radius: 12px;
    border: 3px solid rgba(155, 77, 255, 0.7);
    font-size: clamp(1.3rem, 2.5vw, 2rem);
    font-weight: 800;
    box-shadow: 0 0 25px rgba(155, 77, 255, 0.6);
    margin-top: clamp(12px, 2vw, 20px);
}

.total-wins .win-count {
    text-shadow: 
        0 0 12px currentColor,
        0 0 20px currentColor,
        2px 2px 4px rgba(0, 0, 0, 0.9);
}

.total-wins .win-count.orange {
    color: #ff7b00;
}

.total-wins .win-count.purple {
    color: #9b4dff;
}

.total-wins .win-separator {
    color: rgba(255, 255, 255, 0.3);
    font-size: 1.2rem;
}

/* Canvas wrapper for banner positioning */
.canvas-wrapper {
    position: relative;
    display: inline-block;
}

#gameCanvas {
    border: 5px solid #ff7b00;
    border-radius: 10px;
    box-shadow: 
        0 0 30px rgba(255, 123, 0, 0.8),
        0 0 60px rgba(155, 77, 255, 0.4);
    background: linear-gradient(180deg, #000000 0%, #1a0b00 100%);
    image-rendering: auto;
    max-width: 100%;
    height: auto;
    cursor: crosshair;
}

.controls {
    background: rgba(0, 0, 0, 0.8);
    padding: 20px 30px;
    border-radius: 15px;
    border: 2px solid #9b4dff;
    box-shadow: 0 0 20px rgba(155, 77, 255, 0.3);
    max-width: 1280px;
    width: 100%;
}

.controls h3 {
    text-align: center;
    margin-bottom: 15px;
    color: #ff7b00;
    text-shadow: 0 0 10px #ff7b00;
    font-size: 1.3rem;
}

.control-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
}

.control-item {
    background: rgba(155, 77, 255, 0.1);
    padding: 10px 15px;
    border-radius: 8px;
    border: 1px solid #9b4dff;
    font-size: 0.95rem;
    text-align: center;
    transition: all 0.3s ease;
}

.control-item:hover {
    background: rgba(155, 77, 255, 0.3);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(155, 77, 255, 0.5);
}

kbd {
    display: inline-block;
    padding: 4px 10px;
    background: linear-gradient(135deg, #ff7b00, #9b4dff);
    border-radius: 5px;
    font-weight: bold;
    font-size: 1.1rem;
    margin-right: 8px;
    box-shadow: 
        0 2px 5px rgba(0,0,0,0.5),
        inset 0 1px 2px rgba(255,255,255,0.3);
}

.event-banner {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2.5rem;
    font-weight: bold;
    padding: 30px 60px;
    background: rgba(0, 0, 0, 0.9);
    border: 5px solid #9b4dff;
    border-radius: 20px;
    text-align: center;
    z-index: 1000;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
    box-shadow: 0 0 50px rgba(155, 77, 255, 0.8);
    text-shadow: 
        0 0 20px #ff7b00,
        0 0 40px #9b4dff;
}

.event-banner.show {
    opacity: 1;
}

.mega-banner {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3.5rem;
    font-weight: bold;
    padding: 40px 80px;
    background: linear-gradient(135deg, #ff7b00, #9b4dff, #ff0000);
    border: 8px solid #ffff00;
    border-radius: 25px;
    text-align: center;
    z-index: 1001;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
    box-shadow: 
        0 0 80px rgba(255, 255, 0, 1),
        inset 0 0 40px rgba(255, 255, 255, 0.3);
    text-shadow: 
        0 0 20px #000,
        0 0 40px #fff,
        3px 3px 10px rgba(0,0,0,1);
    animation: shake 0.5s infinite;
}

.mega-banner.show {
    opacity: 1;
}

@keyframes shake {
    0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
    25% { transform: translate(-50%, -50%) rotate(-2deg); }
    75% { transform: translate(-50%, -50%) rotate(2deg); }
}

/* Responsive Design */
@media (max-width: 1300px) {
    #gameCanvas {
        width: 100%;
        height: auto;
    }
}

@media (max-width: 768px) {
    body {
        padding: 10px;
    }
    
    .game-container {
        padding: 10px;
        gap: 10px;
    }
    
    h1 {
        font-size: clamp(1.5rem, 5vw, 2.5rem);
        margin-bottom: 10px;
    }
    
    .scoreboard {
        font-size: clamp(1.5rem, 4vw, 2.2rem);
        padding: 12px 20px;
        gap: clamp(15px, 4vw, 30px);
    }
    
    .timer {
        font-size: clamp(1.3rem, 3.5vw, 2rem);
        min-width: clamp(60px, 12vw, 100px);
    }
    
    .round-status {
        font-size: clamp(1.2rem, 3vw, 1.8rem);
        padding: 6px 15px;
    }
    
    .total-wins {
        font-size: clamp(1.1rem, 3vw, 1.8rem);
        padding: 10px 20px;
        gap: 15px;
        margin-top: 10px;
    }
    
    .canvas-wrapper {
        margin: 8px 0;
    }
    
    .control-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    }
    
    .event-banner {
        font-size: clamp(1.8rem, 4vw, 2.5rem);
        padding: 20px 40px;
    }
    
    .mega-banner {
        font-size: clamp(2.2rem, 5vw, 3.2rem);
        padding: 30px 50px;
    }
}

/* Muted indicator */
body.muted .controls h3::after {
    content: " 🔇";
    color: #ff0000;
}

/* ===============================================================================
   RESPONSIVE LAYOUT - OPTIMIZED FOR LIVESTREAM & MOBILE
   =============================================================================== */

/* Large Desktop - Horizontal Layout */
@media (min-width: 1200px) {
    .game-container {
        flex-direction: row;
    }
    
    .side-panel {
        position: static;
        width: clamp(260px, 20vw, 340px);
    }
}

/* Medium Screens - Vertical Layout */
@media (max-width: 1199px) {
    .game-container {
        flex-direction: column;
        align-items: center;
    }
    
    .side-panel {
        width: 100%;
        max-width: 800px;
        margin-bottom: 20px;
    }
}

/* TikTok Vertical Aspect / Small Screens - Enhanced Visibility */
@media (max-width: 900px), (max-height: 800px) {
    .side-panel {
        width: 95%;
        max-width: 600px;
        padding: clamp(12px, 2vw, 20px);
        position: relative;
        margin-bottom: 15px;
    }
    
    .emojis-header {
        font-size: clamp(3rem, 7vw, 5rem);
        margin-bottom: clamp(12px, 2vw, 20px);
        gap: clamp(15px, 3vw, 30px);
    }
    
    .vs-text {
        font-size: clamp(1.5rem, 3vw, 2.5rem);
    }
    
    .gift-chart h3 {
        font-size: clamp(1.3rem, 2.2vw, 2.8rem);
        margin-bottom: clamp(10px, 1.5vw, 18px);
    }
    
    /* Two-column grid for "How It Works" items */
    .gift-chart table {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: clamp(6px, 1vw, 10px);
        border-spacing: 0;
    }
    
    .gift-chart tr {
        display: contents;
    }
    
    .gift-chart td {
        padding: clamp(8px, 1.5vw, 14px) clamp(6px, 1vw, 10px);
        font-size: clamp(1rem, 1.8vw, 2.2rem);
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        grid-column: span 2;
    }
    
    .gift-chart td:first-child {
        font-size: 2.1em;
        margin-bottom: 4px;
    }
    
    .gift-chart td:last-child {
        text-align: center;
        font-size: clamp(0.95rem, 1.6vw, 2rem);
    }
    
    .like-progress {
        font-size: clamp(1rem, 1.8vw, 1.6rem);
        padding: clamp(12px, 2vw, 16px);
    }
    
    .instructions p {
        font-size: clamp(0.9rem, 1.6vw, 1.8rem);
    }
}
